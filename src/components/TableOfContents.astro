---
import generateToc from "@/lib/generateToc";
import TableOfContentsHeading from "./TableOfContentsHeading.astro";
import type { MarkdownHeading } from "astro";

type Props = {
  headings: MarkdownHeading[];
  className: string;
};

const { headings, className }: Props = Astro.props;
const toc = generateToc(headings);
---

{
  toc.length > 0 && (
    <div class={`toc ${className} text-base leading-relaxed`}>
      <p class="ml-6 font-bold">On this page</p>
      <nav
        class={`border-l-4 border-dark/25 dark:border-light/25 py-2 text-dark/75 dark:text-light/75`}
      >
        <ul>
          {toc.map((heading) => (
            <TableOfContentsHeading heading={heading} />
          ))}
        </ul>
      </nav>
    </div>
  )
}
